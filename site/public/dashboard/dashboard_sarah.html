<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | Sarah</title>

    <link rel="stylesheet" href="dashboard_sarah.css">

</head>

<body>
    <!-- inicio sidebar -->

    <div class="minimenu"></div>
    <div class="sidebar">
        <ul>
            <li class="logo" style="--bg: #333;">
                <a href="#">
                    <div class="icon">
                    </div>
                    <div class="text">PowerTech</div>
                </a>
            </li>
            <div class="listmenu">
                <li style="--bg: #F7E11B;" class="active">
                    <a href="#">
                        <div class="icon"><ion-icon name="analytics-outline"></ion-icon></div>
                        <div class="text">Geral</div>
                    </a>
                </li>
                <li style="--bg: #F7E11B;">
                    <a href="#">
                        <div class="icon"><ion-icon name="cube-outline"></ion-icon></div>
                        <div class="text">MFs</div>
                    </a>
                </li>
                <li style="--bg: #F7E11B;">
                    <a href="#">
                        <div class="icon"><ion-icon name="wallet-outline"></ion-icon></div>
                        <div class="text">VMs</div>
                    </a>
                </li>
                <li style="--bg: #F7E11B;">
                    <a href="#">
                        <div class="icon"><ion-icon name="people-outline"></ion-icon></div>
                        <div class="text">Adicionar Permiss칫es</div>
                    </a>
                </li>
                <li style="--bg: #F7E11B;">
                    <a href="#">
                        <div class="icon"><ion-icon name="person-add-outline"></ion-icon></div>
                        <div class="text">Adicionar Usuario</div>
                    </a>
                </li>
            </div>
            <div class="pessoa">
                <li style="--bg: #333;">
                    <a href="#">
                        <div class="icon">
                            <div class="imgBx">
                                <img src="dash_pt/usuario_redondo.png" alt="">
                            </div>
                        </div>
                        <div class="text">Undefined</div>
                    </a>
                </li>
                <li style="--bg: #333;">
                    <a href="#">
                        <div class="icon"><ion-icon name="log-out-outline"></ion-icon></div>
                        <div class="text">Sair</div>
                    </a>
                </li>
            </div>
        </ul>
    </div>

    <!-- fim sidebar -->

    <!-- inicio do conte칰do da p치gina -->

    <div class="foraside">
        <div class="topo">

            <div class="custom-select">
                <select name="selected">
                    <option value="valor1">Escolher Maquina</option>
                    <option value="valor2">Maquina 1</option>
                    <option value="valor3">Maquina 2</option>
                    <option value="valor4">Maquina 3</option>
                </select>
            </div>

            <div class="user">
                <h4>Usuario Responsavel: Undefined</h4>
            </div>
        </div>

        <div class="first-container">

            <div class="kpi kp2">
                <h3>Processos Est치veis 游릭</h3>
                <div class="numbers">
                    <span> 32 </span>
                </div>
            </div>
            <div class="kpi kp3">
                <h3>Processos Encerrados</h3>
                <div class="numbers">
                    <span> 2 </span>
                </div>
            </div>
            <div class="kpi kp1">
                <h3>Registro de Processos</h3>
                <div class="info-r">
                    <span>NOME</span>
                    <span>DATA HORA</span>
                    <span>STATUS</span>
                </div>
                <div class="registro-container">
                    <div class="tuplas">
                        <span>Adom.com</span>
                        <span> 23/05/2023 12:30</span>
                        <span> 游릭 </span>
                    </div>
                    <div class="tuplas">
                        <span>Adom.com</span>
                        <span> 23/05/2023 12:30</span>
                        <span> 游댮 </span>
                    </div>
                    <div class="tuplas">
                        <span>Adom.com</span>
                        <span> 23/05/2023 12:30</span>
                        <span> 游댮 </span>
                    </div>
                    <div class="tuplas">
                        <span>Adom.com</span>
                        <span> 23/05/2023 12:30</span>
                        <span> 游리 </span>
                    </div>
                    <div class="tuplas">
                        <span>Adom.com</span>
                        <span> 23/05/2023 12:30</span>
                        <span> 游릭 </span>
                    </div>
                    <div class="tuplas">
                        <span>Adom.com</span>
                        <span> 23/05/2023 12:30</span>
                        <span> 游릭 </span>
                    </div>
                    <div class="tuplas">
                        <span>Adom.com</span>
                        <span> 23/05/2023 12:30</span>
                        <span> 游댮 </span>
                    </div>
                    <div class="tuplas">
                        <span>Adom.com</span>
                        <span> 23/05/2023 12:30</span>
                        <span> 游리 </span>
                    </div>
                </div>

            </div>
        </div>

        <div class="second-container">
            <div class="picos">
                <div>
                    <canvas id="myChart"></canvas>
                </div>

                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

                <script>
                    const ctx = document.getElementById('myChart');

                    // Dados fict칤cios (substitua pelos seus dados reais)
                    const resposta = [
                        { momento_grafico: 'Segunda', total_cpu: 12, total_ram: 5 },
                        { momento_grafico: 'Ter칞a', total_cpu: 19, total_ram: 8 },
                        { momento_grafico: 'Quarta', total_cpu: 3, total_ram: 2 },
                        { momento_grafico: 'Quinta', total_cpu: 5, total_ram: 6 },
                        { momento_grafico: 'Sexta', total_cpu: 2, total_ram: 7 },
                        { momento_grafico: 'S치bado', total_cpu: 3, total_ram: 4 },
                        { momento_grafico: 'Domingo', total_cpu: 8, total_ram: 9 },
                    ];

                    // Criando estrutura para plotar gr치fico - labels
                    let labels = [];

                    // Criando estrutura para plotar gr치fico - dados
                    let dados = {
                        labels: labels,
                        datasets: [{
                            label: 'Total CPU',
                            data: [],
                            backgroundColor: '#3498db', // Cor de preenchimento da barra de CPU
                            borderWidth: 1,
                        },
                        {
                            label: 'Total RAM',
                            data: [],
                            backgroundColor: '#e74c3c', // Cor de preenchimento da barra de RAM
                            borderWidth: 1,
                        }]
                    };

                    // Preenchendo dados
                    for (let i = 0; i < resposta.length; i++) {
                        const registro = resposta[i];
                        labels.push(registro.momento_grafico);
                        dados.datasets[0].data.push(registro.total_cpu);
                        dados.datasets[1].data.push(registro.total_ram);
                    }

                    new Chart(ctx, {
                        type: 'bar',
                        data: dados,
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                </script>
            </div>
            <div class="leftcard">
                <h4>Monitor de Desempenho Cr칤tico</h4>
                <div class="info-m">
                    <span>ALERTA</span>
                    <span>NOME</span>
                    <span>USO CPU</span>
                    <span>USO RAM</span>
                    <span>EDITAR</span>
                </div>
                <div class="table-container">
                    
                    <div class="lines">
                        <span>游댮</span>
                        <span>Processo 1</span>
                        <span> 23% </span>
                        <span> 35% </span>
                        <span><button>Matar Processo</button></span>
                    </div>
                    <div class="lines">
                        <span>游리</span>
                        <span>Processo 2</span>
                        <span> 23% </span>
                        <span> 35% </span>
                        <span><button>Matar Processo</button></span>
                    </div>
                    <div class="lines">
                        <span>游댮</span>
                        <span>Processo 3</span>
                        <span> 23% </span>
                        <span> 35% </span>
                        <span><button>Matar Processo</button></span>
                    </div>
                </div>
            </div>
        </div>
    </div>







    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <script>

        let minimenu = document.querySelector('.minimenu');
        let sidebar = document.querySelector('.sidebar');

        minimenu.onclick = function () {
            sidebar.classList.toggle('active');
            document.body.classList.toggle('body-active-sidebar');
        }


        let listmenu = document.querySelectorAll('.listmenu li');
        function activeLink(
        ) {
            listmenu.forEach((item) => item.classList.remove('active'));
            this.classList.add('active')
        }
        listmenu.forEach((item) => item.addEventListener('click', activeLink));
    </script>

    <script>

        function PegarProcessosAtuais() {

            fetch("/processo/ExibirUltimosProcessos", {
                method: "GET",
                headers: {
                    "Content-Type": "application/json"
                },

            }).then(function (resposta) {

                resposta.json().then(json => {
                    console.log(json);
                });

            }
            ).catch(function (erro) {
                console.log(erro);
            })

        }

        PegarProcessosAtuais()


    </script>

</body>

</html>